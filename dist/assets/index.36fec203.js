(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();let b={};const N=document.getElementById("highScoreTable"),g=document.getElementById("confirmAnswer"),c=document.getElementById("progressBar"),L=document.getElementById("quizTimer"),d=document.getElementById("question"),a=document.getElementById("playerAnswer"),x=document.getElementById("playerAlternative"),p=document.getElementById("endGame"),u=document.getElementById("winner"),v=document.querySelector("#winner button"),O=document.getElementById("scorePage"),q=10,R="https://courselab.lnu.se/quiz/question/1";let E=!1,T,y,l;function I(e){const t=document.querySelector(e).children;for(let n=0;n<t.length;n++)t[n].style.visibility="hidden",t[n].style.display="none",t[n].checked=!1}let m=0,f=0,h;function D(){document.getElementById("mainPage").style.display="none",document.getElementById("startButton").style.display="none"}const G=function(e){D(),document.getElementById("mainHeader").style.visibility="visible",d.style.visibility="visible",d.style.display="block",d.style.visibility="visible",g.hidden=!1,a.style.visibility="visible",a.style.display="block",a.value="";const t=document.getElementById("actualQuestion");t.textContent=e.question},M=function(e){document.querySelector("#playerAnswer").style.visibility="hidden",a.style.display="none",g.hidden=!0,document.querySelector("#playerAlternative").style.visibility="visible";const t=Object.keys(e).length,n=document.querySelector("#playerAlternative");for(let s=0;s<t;s++){const i=document.createElement("input");i.setAttribute("type","radio"),i.className="rad-input",i.name="choices",i.value="alt"+(s+1),i.id="radio"+(s+1),n.appendChild(i);const o=document.createElement("label");o.id="label"+(s+1),o.textContent=e["alt"+(s+1)],o.className="rad-label";const r=document.createElement("br");o.htmlFor=i.id,n.appendChild(o),n.appendChild(r)}};document.getElementById("playerAlternative").addEventListener("click",function(e){e.target&&e.target.matches("input[type='radio']")&&Q()});const U=function(){I("#mainDiv"),p.style.visibility="visible",p.style.display="block"},j=function(){c.classList.remove("round-time-bar"),document.getElementById("mainHeader").style.visibility="hidden",x.style.visibility="hidden",d.style.visibility="hidden",a.style.visibility="hidden",p.style.visibility="hidden",p.style.display="none",u.style.visibility="hidden",u.style.display="none",O.style.visibility="hidden"},z=function(e){c.classList.remove("round-time-bar"),I("#mainDiv"),document.querySelector("#scorePage").style.visibility="visible",document.querySelector("#scorePage").style.display="block";let t=5;e.length<5&&(t=e.length);for(let s=0;s<t;s++){const i=document.createElement("tr"),o=document.createElement("td"),r=document.createElement("td"),B=document.createElement("td");i.appendChild(o),i.appendChild(r),i.appendChild(B),N.appendChild(i),o.innerText=e[s].name,r.innerText=e[s].time,B.innerText=e[s].score}const n=document.createElement("button");n.textContent="Try again",document.querySelector("#scorePage").appendChild(n)};async function H(e){const n=await fetch(e,{method:"GET"});if(n.ok)return n.json();throw w(),new Error(`HTTP error! status: ${n.status}`)}function k(e){H(e).then(t=>{l=t,G(l),l.alternatives?(E=!0,M(l.alternatives)):(document.querySelector("#playerAlternative").style.visibility="hidden",document.querySelector("#playerAnswer").style.visibility="visible"),F(q,L),L.style.display="none"})}function Q(){c.classList.remove("round-time-bar"),P();const e=document.getElementsByName("choices");for(let n=0;n<e.length;n++)e[n].checked&&(b={answer:e[n].value});const t=document.querySelector("#playerAlternative");for(;t.firstChild;)t.firstChild.remove();C()}g.addEventListener("click",()=>{c.classList.remove("round-time-bar"),P();let e;if(E===!1)e=document.querySelector(".answer").value;else{document.querySelectorAll("#radio").forEach(n=>{n.checked&&(e=n.value)});const t=document.querySelector("#playerAlternative");for(;t.firstChild;)t.firstChild.remove()}b={answer:e},C()});document.getElementById("playerAnswer").addEventListener("keydown",function(e){e.key==="Enter"&&(e.preventDefault(),g.click())});document.getElementById("chosenName").addEventListener("keydown",function(e){e.key==="Enter"&&(e.preventDefault(),document.getElementById("startButton").click())});async function A(){const e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)};try{const t=await fetch(l.nextURL,e);if(t.ok)return t.json();w()}catch{console.log("Something went wrong")}}v.addEventListener("click",()=>{V()});function J(e){document.getElementById("mainHeader").style.visibility="hidden",a.style.visibility="hidden",a.style.display="none",d.style.visibility="hidden",d.style.display="none";const t=document.createElement("p");u.style.visibility="visible",u.style.display="block";const n=document.createElement("p");n.innerHTML=e,t.innerHTML="Congratulations "+h+"! You completed the quiz in: "+f+" seconds.",v.parentNode.insertBefore(t,v.previousSibling),t.parentNode.insertBefore(n,t)}function C(){A().then(e=>{l=e,m++,l.nextURL?l.nextURL&&(k(l.nextURL),E=!1):J(l.message)})}function F(e,t){c.classList.add("round-time-bar"),y=e,T=setInterval(()=>{t.textContent=y,--y<0&&w()},1e3)}function P(){c.classList.remove("round-time-bar"),clearInterval(T),f+=q-y}function w(){c.classList.remove("round-time-bar"),U(),document.querySelector("#endGame button").addEventListener("click",()=>{document.location.reload()})}function K(){k(R),A(),document.querySelector("#endGame").style.visibility="hidden"}function V(){c.classList.remove("round-time-bar"),u.style.visibility="hidden",u.style.display="none";let e;localStorage.highscore?(e=JSON.parse(window.localStorage.highscore),e.push({name:h,time:f,score:m})):e=[{name:h,time:f,score:m}],m=0,e=e.sort(function(t,n){return t.time-n.time}),localStorage.highscore=JSON.stringify(e),z(e),document.querySelector("#scorePage button").addEventListener("click",()=>{document.location.reload()})}function W(e){return!e.trim().length}document.getElementById("chosenName").addEventListener("input",function(){W(this.value)&&alert("Please enter a name!")});j();const S=document.getElementById("startButton");S.addEventListener("click",()=>{h=S.previousElementSibling.value,K()});
